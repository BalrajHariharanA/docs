"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[899],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,k=c["".concat(u,".").concat(m)]||c[m]||d[m]||l;return n?r.createElement(k,o(o({ref:t},p),{},{components:n})):r.createElement(k,o({ref:t},p))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2968:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const l={sidebar_position:2},o="Configure the Remote Rollup",i={unversionedId:"running-a-rollup-on-astria-dusknet/configure-remote-rollup",id:"running-a-rollup-on-astria-dusknet/configure-remote-rollup",title:"Configure the Remote Rollup",description:"Endpoints",source:"@site/docs/running-a-rollup-on-astria-dusknet/2-configure-remote-rollup.md",sourceDirName:"running-a-rollup-on-astria-dusknet",slug:"/running-a-rollup-on-astria-dusknet/configure-remote-rollup",permalink:"/docs/running-a-rollup-on-astria-dusknet/configure-remote-rollup",draft:!1,editUrl:"https://github.com/astriaorg/docs/docs/running-a-rollup-on-astria-dusknet/2-configure-remote-rollup.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/docs/running-a-rollup-on-astria-dusknet/overview"},next:{title:"Local Rollup Deployment",permalink:"/docs/running-a-rollup-on-astria-dusknet/local-rollup-deployment"}},u={},s=[{value:"Endpoints",id:"endpoints",level:2},{value:"Get the Current Sequencer Block Height",id:"get-the-current-sequencer-block-height",level:2},{value:"Build the <code>astria-cli</code>",id:"build-the-astria-cli",level:2},{value:"Using the <code>astria-cli</code>",id:"using-the-astria-cli",level:2},{value:"Environment Variables + cli",id:"environment-variables--cli",level:2},{value:"Creating your own Genesis Account",id:"creating-your-own-genesis-account",level:2}],p={toc:s},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"configure-the-remote-rollup"},"Configure the Remote Rollup"),(0,a.kt)("h2",{id:"endpoints"},"Endpoints"),(0,a.kt)("p",null,"Endpoints for the remote cluster are the following:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"NAME (as helm creates)"),(0,a.kt)("th",{parentName:"tr",align:null},"HOSTS"),(0,a.kt)("th",{parentName:"tr",align:null},"ADDRESS"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"astria-ingress"),(0,a.kt)("td",{parentName:"tr",align:null},"rpc.evm.dusk-1.devnet.astria.org"),(0,a.kt)("td",{parentName:"tr",align:null},"34.160.214.22")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"blockscout-ingress"),(0,a.kt)("td",{parentName:"tr",align:null},"explorer.evm.dusk-1.devnet.astria.org"),(0,a.kt)("td",{parentName:"tr",align:null},"34.111.167.16")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"faucet-ingress"),(0,a.kt)("td",{parentName:"tr",align:null},"faucet.evm.dusk-1.devnet.astria.org"),(0,a.kt)("td",{parentName:"tr",align:null},"130.211.4.120")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"sequencer-faucet"),(0,a.kt)("td",{parentName:"tr",align:null},"faucet.sequencer.dusk-1.devnet.astria.org"),(0,a.kt)("td",{parentName:"tr",align:null},"34.36.8.102")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"sequencer-ingress"),(0,a.kt)("td",{parentName:"tr",align:null},"rpc.sequencer.dusk-1.devnet.astria.org"),(0,a.kt)("td",{parentName:"tr",align:null},"34.111.73.187")))),(0,a.kt)("h2",{id:"get-the-current-sequencer-block-height"},"Get the Current Sequencer Block Height"),(0,a.kt)("p",null,"Take the ",(0,a.kt)("inlineCode",{parentName:"p"},"sequencer-ingress")," URL and run the following command to get the\ncurrent block height of the sequencer."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"curl -s https://rpc.sequencer.dusk-1.devnet.astria.org/block | jq .result.block.header.height\n")),(0,a.kt)("p",null,"Keep track of this block height as it will be used for making the rollup config\nlater on. You will use this printed height in place of\n",(0,a.kt)("inlineCode",{parentName:"p"},"<INITIAL_SEQUENCER_BLOCK_HEIGHT>")," in the steps below."),(0,a.kt)("h2",{id:"build-the-astria-cli"},"Build the ",(0,a.kt)("inlineCode",{parentName:"h2"},"astria-cli")),(0,a.kt)("p",null,"Clone the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/astriaorg/astria/tree/main"},"Astria repo"),", checkout\nthe ",(0,a.kt)("inlineCode",{parentName:"p"},"feature/self-serve-rollup-cli")," branch, and build the new config using the ",(0,a.kt)("inlineCode",{parentName:"p"},"astria-cli"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:astriaorg/astria.git\ncd astria\ngit checkout feature/self-serve-rollup-cli\ncd crates/astria-cli\ncargo build --release\n# return to the root dir of the `astria` repo\ncd ../..\n")),(0,a.kt)("h2",{id:"using-the-astria-cli"},"Using the ",(0,a.kt)("inlineCode",{parentName:"h2"},"astria-cli")),(0,a.kt)("p",null,"Replace the tags in the commands and env vars below, as follows:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Var Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Var Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<YOUR_ROLLUP_NAME>")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},"The name of your rollup")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<YOUR_ROLLUP_ID>")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},"Recommended to be the same as your rollup name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<YOUR_NETWORK_ID>")),(0,a.kt)("td",{parentName:"tr",align:null},"u64"),(0,a.kt)("td",{parentName:"tr",align:null},"The id of your network")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<INITIAL_SEQUENCER_BLOCK_HEIGHT>")),(0,a.kt)("td",{parentName:"tr",align:null},"u64"),(0,a.kt)("td",{parentName:"tr",align:null},"The height of the sequencer (found above)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<GENESIS_ADDRESS>")),(0,a.kt)("td",{parentName:"tr",align:null},"[u8; 40]"),(0,a.kt)("td",{parentName:"tr",align:null},"A wallet address")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<BALANCE>")),(0,a.kt)("td",{parentName:"tr",align:null},"u64"),(0,a.kt)("td",{parentName:"tr",align:null},"A balance")))),(0,a.kt)("h2",{id:"environment-variables--cli"},"Environment Variables + cli"),(0,a.kt)("p",null,"Instead of setting the entire config in one command, you can optionally set the\nfollowing environment variables first:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export ROLLUP_USE_TTY=true\nexport ROLLUP_LOG_LEVEL=DEBUG\nexport ROLLUP_NAME=<YOUR_ROLLUP_NAME>\nexport ROLLUP_CHAIN_ID=0x<YOUR_CHAIN_ID>\nexport ROLLUP_NETWORK_ID=<YOUR_NETWORK_ID>\nexport ROLLUP_SKIP_EMPTY_BLOCKS=false\nexport ROLLUP_SEQUENCER_INITIAL_BLOCK_HEIGHT=<INITIAL_SEQUENCER_BLOCK_HEIGHT>\nexport ROLLUP_SEQUENCER_WEBSOCKET=wss://rpc.sequencer.dusk-1.devnet.astria.org/websocket\nexport ROLLUP_SEQUENCER_RPC=https://rpc.sequencer.dusk-1.devnet.astria.org\n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"See the ",(0,a.kt)("a",{parentName:"p",href:"#creating-your-own-genesis-account"},"Creating your own Genesis Account")," section below if you would like to\nadd a pre-funded account genesis account.")),(0,a.kt)("p",null,"Then just run the basic config create command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"./target/release/astria-cli rollup config create\n")),(0,a.kt)("p",null,"You can then run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"cat <YOUR_ROLLUP_NAME>-rollup-conf.yaml\n")),(0,a.kt)("p",null,"to print out the config file contents to double check everything:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"config:\n  useTTY: true\n  logLevel: DEBUG\n  rollup:\n    name: <YOUR_ROLLUP_NAME>\n    chainId: <YOUR_CHAIN_ID>\n    networkId: <YOUR_NETWORK_ID>\n    skipEmptyBlocks: true\n    genesisAccounts: []\n  sequencer:\n    initialBlockHeight: <INITIAL_SEQUENCER_BLOCK_HEIGHT>\n    websocket: ws://rpc.sequencer.dusk-1.devnet.astria.org/websocket\n    rpc: http://rpc.sequencer.dusk-1.devnet.astria.org\n  celestia:\n    fullNodeUrl: http://celestia-service:26658\n")),(0,a.kt)("p",null,"Export this file to the env vars as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export ROLLUP_CONF_FILE=<YOUR_ROLLUP_NAME>-rollup-conf.yaml\n")),(0,a.kt)("p",null,"At this point, if you do not want to add any genesis accounts to your rollup you\ncan move on to the next section."),(0,a.kt)("p",null,"If you do want to add an account(s), see the next section."),(0,a.kt)("h2",{id:"creating-your-own-genesis-account"},"Creating your own Genesis Account"),(0,a.kt)("p",null,"You can optionally add a genesis account(s) to your rollup during configuration.\nThis is done by ",(0,a.kt)("inlineCode",{parentName:"p"},"export"),"ing the additional ",(0,a.kt)("inlineCode",{parentName:"p"},"ROLLUP_GENESIS_ACCOUNTS")," environment variable."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export ROLLUP_GENESIS_ACCOUNTS=<GENESIS_ADDRESS>:100000000000000000000\n")),(0,a.kt)("p",null,"You can create an account using"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cast w new\n")),(0,a.kt)("p",null,"to create a new account:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"Successfully created new keypair.\nAddress:     0xfFe9...5f8b # <GENESIS_ADDRESS>\nPrivate key: 0x332e...a8fb # <GENESIS_PRIVATE_KEY>\n")),(0,a.kt)("p",null,"Set ",(0,a.kt)("inlineCode",{parentName:"p"},"<GENESIS_ADDRESS>")," to the address printed out from the new command, and\n",(0,a.kt)("inlineCode",{parentName:"p"},"export")," the private key to the env vars using:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export ROLLUP_FAUCET_PRIV_KEY=<GENESIS_PRIVATE_KEY>\n")),(0,a.kt)("admonition",{type:"danger"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"NEVER")," use a private key you use on a live a network. "),(0,a.kt)("p",{parentName:"admonition"},"For ease of use we recommend you set this to an  key which you have access to")),(0,a.kt)("p",null,"If you do use a genesis account, your full env var export will look something\nlike this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export ROLLUP_USE_TTY=true\nexport ROLLUP_LOG_LEVEL=DEBUG\nexport ROLLUP_NAME=<YOUR_ROLLUP_NAME>\nexport ROLLUP_CHAIN_ID=<YOUR_CHAIN_ID>\nexport ROLLUP_NETWORK_ID=<YOUR_NETWORK_ID>\nexport ROLLUP_SKIP_EMPTY_BLOCKS=false\nexport ROLLUP_GENESIS_ACCOUNTS=<GENESIS_ADDRESS>:100000000000000000000\nexport ROLLUP_SEQUENCER_INITIAL_BLOCK_HEIGHT=418933\nexport ROLLUP_SEQUENCER_WEBSOCKET=wss://rpc.sequencer.dusk-1.devnet.astria.org/websocket\nexport ROLLUP_SEQUENCER_RPC=https://rpc.sequencer.dusk-1.devnet.astria.org\nexport ROLLUP_CELESTIA_FULL_NODE_URL=http://celestia-service:26658\n")))}d.isMDXComponent=!0}}]);